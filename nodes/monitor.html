<!-- START OF MAIN NODE -->

<script type="text/javascript">
    RED.nodes.registerType('monitor',{
        category: 'Smart Home',
        color: '#C0DEED',
        inputs: 1,
        outputs: 1,
        outputLabels: ["Status object"],
        icon: "font-awesome/fa-bullhorn",
        defaults: {
            name: {},
            monitorTopic: {},
            warningTime: {value: 30},
            warningTimeUnit: {value: "s"},
            warningTimeOverride: {value: false},
            debug: {}
        },
        label: function() {
            let app = this.warningTime + this.warningTimeUnit
            if (this.warningTimeOverride) {app = app + "*"}
            return (this.name || "Monitor") + " (" + app + ")"
        }
    });
</script>


<script type="text/html" data-template-name="monitor">
    <style>
        .red-ui-editor .form-row label {
            width: 120px
        }
        .red-ui-editor .form-row input {
            width: 300px
        }
    </style>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name">
    </div>
    <div class="form-row">
        <label for="node-input-monitorTopic"><i class="fa fa-tasks"></i> Arming topic</label>
        <input type="text" id="node-input-monitorTopic" placeholder="'activate' if unset">
    </div>
    <div class="form-row">
        <label><i class="fa fa-tasks"></i> Warning time</label>
        <input type="number" step="1" min="0" id="node-input-warningTime" style="text-align: end; width: 70px !important">
        <select id="node-input-warningTimeUnit" style="width:140px !important">
            <option value="s">Seconds</option>
            <option value="m">Minutes</option>
            <option value="h">Hours</option>
        </select>
    </div>
    <div class="form-row">
        <label></label>
        <input type="checkbox" id="node-input-warningTimeOverride" style="margin-left:0px; vertical-align:top; width:auto !important;"> <label style="width:auto !important;" for="node-input-warningTimeOverride">Allow msg.timeout to overwrite</label>
    </div>
    <div class="form-row">
        <label><i class="fa fa-bug"></i> Debugging</label>
        <input type="checkbox" id="node-input-debug" style="display:inline-block; width:auto;">
    </div>
</script>

<!-- END OF MAIN NODE -->